<body>
	<div class="row">
		<div class="alert alert-success" role="alert" ng-show="messageNewCtrl.onSuccess">
			Message successfully sent to {{recipientEmail}}, <a ui-sref="messages.new" ui-sref-opts="{reload: true}">create another message</a>.
		</div>
		<div class="alert alert-danger" role="alert" ng-show="messageNewCtrl.invalidForm">
			<p>Cannot send message due to the following:</p>
			<ul style="list-style-type:circle">
			  	<li ng-show="messageNewCtrl.invalidEmail">Invalid email</li>
			  	<li ng-show="messageNewCtrl.recipientNotFound">Recipient {{recipientEmail}} does not exist, <a href="" ng-click="messageNewCtrl.invite(recipientEmail)">Invite to join MessageApp</a></li>
			</ul>
		</div>
    	<form name="messageForm" ng-submit="messageNewCtrl.validateAndSend(messageForm.email.$error.email, recipientEmail)" ng-hide="messageNewCtrl.onSuccess">
    		<div class="form-group">
		    	<label for="email">Recipient<span ng-show="messageForm.email.$error.required">*</span></label>
	   	 		<input name="email" type="email" class="form-control" ng-model="recipientEmail" ng-focus="messageNewCtrl.invalidForm = false" placeholder="Email" required>
		  	</div>
	  		<div class="form-group">
		    	<label for="subject">Subject</label>
	   	 		<input type="text" class="form-control" id="subject" ng-model="messageNewCtrl.message.subject" placeholder="Subject">
		  	</div>
		  	<div class="form-group">
		    	<label for="message">Message<span ng-show="messageForm.message.$error.required">*</span></label>
		    	<textarea name="message" class="form-control" rows="10" id="message" ng-model="messageNewCtrl.message.content" placeholder="Message" required></textarea>
		  	</div>
		  	<div align="right">
			  	<a class="btn btn-default" ui-sref="messages({type: 'received'})">Cancel</a>
			  	<button type="submit" class="btn btn-primary">Send</button>
			</div>
		</form>
	</div>
</body>